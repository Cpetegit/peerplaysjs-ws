!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.t=e();else if("function"==typeof define&&define.o)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).i=e()}}(function(){return function e(n,t,o){function r(c,s){if(!t[c]){if(!n[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[c]={t:{}};n[c][0].call(l.t,function(e){var t=n[c][1][e];return r(t||e)},l,l.t,e,n,t,o)}return t[c].t}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,n,t){"use strict";var o,r=e("./ApisInstance"),i=e("./ChainConfig");n.t={s:function(e){this.u=e,o&&o.s(e)},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=arguments[1];return o&&(o.close(),o=null),(o=new r(i)).s(this.u),o&&n&&o.connect(e),o},l:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=arguments[1];return o||(o=new r).s(this.u),o&&n&&o.connect(e),o},p:function(){return Apis.l().h},close:function(){o&&(o.close(),o=null)}}},{_:2,v:3}],2:[function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.m=o.m||!1,o.g=!0,"value"in o&&(o.k=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=e("./ChainWebSocket"),c=e("./GrapheneApi"),s=function(){function e(n){o(this,e),this.C=n}return r(e,[{key:"connect",value:function(e){var n=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&e.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.S=new i(e,this.u),this.T=this.S.P("","").then(function(){n.I=new c(n.S,"database"),n.O=new c(n.S,"network_broadcast"),n.A=new c(n.S,"history"),n.W=new c(n.S,"crypto");var e=n.I.init().then(function(){return n.I.exec("get_chain_id",[]).then(function(e){return n.h=e,n.C?n.C.R(e):e})});return n.S.N=function(){n.S.P("","").then(function(){n.I.init().then(function(){n.u&&n.u("reconnect")}),n.O.init(),n.A.init(),n.W.init()})},Promise.all([e,n.O.init(),n.A.init(),n.W.init().catch(function(e){return console.error("ApiInstance\tCrypto API Error",e)})])})}},{key:"close",value:function(){this.S.close(),this.S=null}},{key:"db_api",value:function(){return this.I}},{key:"network_api",value:function(){return this.O}},{key:"history_api",value:function(){return this.A}},{key:"crypto_api",value:function(){return this.W}},{key:"setRpcConnectionStatusCallback",value:function(e){this.u=e}}]),e}();n.t=s},{L:4,G:5}],3:[function(e,n,t){(function(e){"use strict";var t,o={j:e.U.D||"GPH"};n.t=t={Y:"CORE",j:"GPH",q:15,H:86400,M:{B:{Y:"BTS",j:"BTS",h:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},F:{Y:"MUSE",j:"MUSE",h:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},J:{Y:"TEST",j:"TEST",h:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},V:{Y:"GOV",j:"FEW",h:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"},K:{Y:"TEST",j:"TEST",h:"f34fcd74a151676cfce5121f37c4c3257821cd6754239a3f9c63023018cdd710"},X:{Y:"TEST",j:"TEST",h:"f34fcd74a151676cfce5121f37c4c3257821cd6754239a3f9c63023018cdd710"},Z:{Y:"PPY2T",j:"PPY",h:"82c339d32256728bcc4df63bcc3e3244f6140a16fef31f707a6613ad189156ae"},$:{Y:"PPY",j:"PPY",h:"6b6b5f0ce7a36d323768e534f3edb41c6d6332a541a95725b98e28d140850134"}},R:function(e){var n,r,i,c,s;for(n=0,r=(s=Object.keys(t.M)).length;n<r;n++)if(c=s[n],(i=t.M[c]).h===e)return t.ee=c,i.j&&(t.j=i.j,o.j=i.j),{ee:c,ne:i};t.ee||console.log("Unknown chain id (this may be a testnet)",e)},reset:function(){t.Y="CORE",t.j="GPH",o.j="GPH",t.q=15,t.H=86400,console.log("Chain config reset")},te:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";t.j=e,o.j=e}}}).call(this,e("_process"))},{oe:8}],4:[function(e,n,t){(function(t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.m=o.m||!1,o.g=!0,"value"in o&&(o.k=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=void 0;"undefined"!=typeof WebSocket||t.U.re?"undefined"!=typeof WebSocket&&(i=e("ReconnectingWebSocket")):i=e("ws");var c=function(){function e(n,t){var r=this;o(this,e),this.u=t;try{this.ie=new i(n)}catch(e){console.error("invalid websocket URL:",e),this.ie=new i("wss://127.0.0.1:8080")}this.ie.ce=5e3,this.se=null,this.N=null,this.ae=new Promise(function(e,n){r.se=n,r.ie.onopen=function(){r.u&&r.u("open"),r.N&&r.N(),e()},r.ie.onerror=function(e){r.u&&r.u("error"),r.se&&r.se(e)},r.ie.onmessage=function(e){return r.listener(JSON.parse(e.data))},r.ie.onclose=function(){r.u&&r.u("closed")}}),this.ue=0,this.le={},this.fe={},this.de={}}return r(e,[{key:"call",value:function(e){var n=this,t=e[1];if(this.ue+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.fe[this.ue]={pe:e[2][0]},e[2][0]=this.ue),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof e[2][0])throw new Error("First parameter of unsub must be the original callback");var o=e[2].splice(0,1)[0];for(var r in this.fe)if(this.fe[r].pe===o){this.de[this.ue]=r;break}}var i={method:"call",he:e};return i.id=this.ue,new Promise(function(e,t){n.le[n.ue]={time:new Date,resolve:e,reject:t},n.ie.onerror=function(e){console.log("!!! ChainWebSocket Error ",e),t(e)},n.ie.send(JSON.stringify(i))})}},{key:"listener",value:function(e){var n=!1,t=null;"notice"===e.method&&(n=!0,e.id=e.he[0]),(t=n?this.fe[e.id].pe:this.le[e.id])&&!n?(e.error?t.reject(e.error):t.resolve(e.result),delete this.le[e.id],this.de[e.id]&&(delete this.fe[this.de[e.id]],delete this.de[e.id])):t&&n?t(e.he[1]):console.log("Warning: unknown websocket response: ",e)}},{key:"login",value:function(e,n){var t=this;return this.ae.then(function(){return t.call([1,"login",[e,n]])})}},{key:"close",value:function(){this.ie.close()}}]),e}();n.t=c}).call(this,e("_process"))},{be:6,oe:8,ie:7}],5:[function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.m=o.m||!1,o.g=!0,"value"in o&&(o.k=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=function(){function e(n,t){o(this,e),this.S=n,this._e=t}return r(e,[{key:"init",value:function(){var e=this;return this.S.call([1,this._e,[]]).then(function(n){return e.ve=n,e})}},{key:"exec",value:function(e,n){return this.S.call([this.ve,e,n]).catch(function(t){throw console.log("!!! GrapheneApi error: ",e,n,t,JSON.stringify(t)),t})}}]),e}();n.t=i},{}],6:[function(e,n,t){!function(e,t){void 0!==n&&n.t?n.t=t():e.be=t()}(this,function(){function e(n,t,o){function r(e,n){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}var i={debug:!1,we:!0,me:1e3,ge:3e4,ye:1.5,ce:2e3,ke:null,binaryType:"blob"};o||(o={});for(var c in i)void 0!==o[c]?this[c]=o[c]:this[c]=i[c];this.url=n,this.Ce=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,a=this,u=!1,l=!1,f=null,d=document.createElement("div");d.addEventListener("open",function(e){a.onopen(e)}),d.addEventListener("close",function(e){a.onclose(e)}),d.addEventListener("connecting",function(e){a.Ee(e)}),d.addEventListener("message",function(e){a.onmessage(e)}),d.addEventListener("error",function(e){a.onerror(e)}),this.addEventListener=d.addEventListener.bind(d),this.removeEventListener=d.removeEventListener.bind(d),this.dispatchEvent=d.dispatchEvent.bind(d),this.open=function(n){if(s=new WebSocket(a.url,t||[]),s.binaryType=this.binaryType,n){if(this.ke&&this.Ce>this.ke)return}else d.dispatchEvent(r("connecting")),this.Ce=0;(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","attempt-connect",a.url);var o=s,i=setTimeout(function(){(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","connection-timeout",a.url),l=!0,o.close(),l=!1},a.ce);s.onopen=function(t){clearTimeout(i),(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","onopen",a.url),a.protocol=s.protocol,a.readyState=WebSocket.OPEN,a.Ce=0;var o=r("open");o.Te=n,n=!1,d.dispatchEvent(o)},s.onclose=function(t){if(clearTimeout(i),s=null,u)a.readyState=WebSocket.CLOSED,d.dispatchEvent(r("close"));else{a.readyState=WebSocket.CONNECTING;var o=r("connecting");o.code=t.code,o.reason=t.reason,o.wasClean=t.wasClean,d.dispatchEvent(o),n||l||((a.debug||e.Se)&&console.debug("ReconnectingWebSocket","onclose",a.url),d.dispatchEvent(r("close")));var i=a.me*Math.pow(a.ye,a.Ce);f=setTimeout(function(){a.Ce++,a.open(!0)},i>a.ge?a.ge:i)}},s.onmessage=function(n){(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","onmessage",a.url,n.data);var t=r("message");t.data=n.data,d.dispatchEvent(t)},s.onerror=function(n){(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","onerror",a.url,n),d.dispatchEvent(r("error"))}},1==this.we&&this.open(!1),this.send=function(n){if(s)return(a.debug||e.Se)&&console.debug("ReconnectingWebSocket","send",a.url,n),s.send(n);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,n){void 0===e&&(e=1e3),u=!0,s&&s.close(e,n),f&&(clearTimeout(f),f=null)},this.refresh=function(){s&&s.close()}}if("undefined"!=typeof window&&"WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.Ee=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.Se=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e})},{}],7:[function(e,n,t){},{}],8:[function(e,n,t){function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===o||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(n){try{return f.call(null,e,0)}catch(n){return f.call(this,e,0)}}}function c(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(n){try{return d.call(null,e)}catch(n){return d.call(this,e)}}}function s(){_&&h&&(_=!1,h.length?b=h.concat(b):v=-1,b.length&&a())}function a(){if(!_){var e=i(s);_=!0;for(var n=b.length;n;){for(h=b,b=[];++v<n;)h&&h[v].xe();v=-1,n=b.length}h=null,_=!1,c(e)}}function u(e,n){this.Pe=e,this.Ie=n}function l(){}var f,d,p=n.t={};!function(){try{f="function"==typeof setTimeout?setTimeout:o}catch(e){f=o}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,b=[],_=!1,v=-1;p.Oe=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];b.push(new u(e,n)),1!==b.length||_||i(a)},u.prototype.xe=function(){this.Pe.apply(null,this.Ie)},p.title="browser",p.re=!0,p.U={},p.Ae=[],p.version="",p.We={},p.Re=l,p.addListener=l,p.Ne=l,p.Le=l,p.removeListener=l,p.Ge=l,p.je=l,p.De=l,p.Ue=l,p.Ye=function(e){return[]},p.qe=function(e){throw new Error("process.binding is not supported")},p.He=function(){return"/"},p.Me=function(e){throw new Error("process.chdir is not supported")},p.Be=function(){return 0}},{}]},{},[1])(1)});